<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <base href="https://hwashine.tw/">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç”¢å“ç¸½è¡¨ - è¯ç¿”é¡æ–™</title>
  <!-- å¼•å…¥ Roboto Mono ç”¨æ–¼é¡¯ç¤ºæŠ€è¡“ä»£ç¢¼ï¼Œæå‡å°ˆæ¥­åº¦ -->
  <style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Roboto+Mono:wght@400;500;700&family=Inter:wght@400;500;600&display=swap');

  :root {
    /* --- é ­éƒ¨é…è‰² (é‚„åŸç¶²ç«™åŸå§‹é¢¨æ ¼) --- */
    --header-bg-start: #1b5e76; /* æ·±è—ç¶  */
    --header-bg-end: #2c8cb0;   /* äº®è— */
    
    /* --- å…§å®¹å€å°ˆæ¥­é…è‰² --- */
    --corporate-blue: #0ea5e9;   /* ç§‘æŠ€è— (å¼·èª¿è‰²) */
    --corporate-blue-dim: #0284c7;
    
    --bg-body: #f1f5f9;          /* å†·ç°èƒŒæ™¯ */
    --bg-card: #ffffff;
    
    --text-primary: #1e293b;     /* ä¸»è¦æ–‡å­— */
    --text-secondary: #64748b;   /* æ¬¡è¦æ–‡å­— */
    --text-tertiary: #94a3b8;    /* è¼”åŠ©æ–‡å­— */
    
    --border-light: #e2e8f0;
    
    /* é™°å½±èˆ‡åœ“è§’ç³»çµ± */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

    --radius-sm: 4px;
    --radius-md: 6px;
    --radius-lg: 8px;
  }

  body {
    font-family: 'Inter', 'Noto Sans TC', sans-serif;
    background-color: var(--bg-body);
    color: var(--text-primary);
    margin: 0;
    padding: 0;
    line-height: 1.6;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
  }

  /* --- 1. Header: é‚„åŸæ³¢ç´‹å‹•ç•«è¨­è¨ˆ --- */
  header {
    background: linear-gradient(135deg, var(--header-bg-start), var(--header-bg-end));
    color: white;
    text-align: center;
    padding: 3rem 1rem;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    position: relative;
    overflow: hidden; /* ç¢ºä¿æ³¢ç´‹ä¸æº¢å‡º */
    z-index: 2;
  }

  /* é‚„åŸï¼šæ³¢ç´‹å‹•ç•«å½å…ƒç´  */
  header::before {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 70%);
    animation: ripple 15s infinite linear;
    z-index: 1;
    pointer-events: none;
  }

  @keyframes ripple {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  header h1 {
    margin: 0;
    font-size: 2.5rem;
    font-weight: 700;
    letter-spacing: 2px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    position: relative; /* ç¢ºä¿æ–‡å­—åœ¨æ³¢ç´‹ä¹‹ä¸Š */
    z-index: 2;
  }

  /* --- 2. Navigation: é‚„åŸæ¯›ç»ç’ƒæ•ˆæœ --- */
  nav {
    background-color: rgba(255, 255, 255, 0.85); /* åŠé€æ˜ç™½ */
    backdrop-filter: blur(12px); /* æ¯›ç»ç’ƒæ¨¡ç³Šæ•ˆæœ */
    -webkit-backdrop-filter: blur(12px); /* Safari æ”¯æ´ */
    padding: 0;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    position: sticky;
    top: 0;
    z-index: 1000;
    border-bottom: 1px solid rgba(226, 232, 240, 0.6);
  }

  nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    gap: 0;
  }

  nav ul li { margin: 0; }

  nav ul li a {
    display: block;
    color: #555;
    text-decoration: none;
    font-weight: 600;
    font-size: 1.05rem;
    padding: 1rem 1.5rem;
    transition: all 0.2s;
    border-bottom: 3px solid transparent;
  }

  nav ul li a:hover, nav ul li a.active {
    color: var(--header-bg-end);
    background-color: rgba(248, 250, 252, 0.5);
    border-bottom-color: var(--header-bg-end);
  }

  main {
    flex: 1;
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
    box-sizing: border-box;
    padding: 2rem 1.5rem;
  }

  /* --- 3. Toolbar --- */
  .toolbar-container {
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    padding: 1rem;
    margin-bottom: 2rem;
    box-shadow: var(--shadow-sm);
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 1rem;
  }

  .toolbar-group {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex: 1;
    min-width: 200px;
  }

  .toolbar-input, .toolbar-select {
    width: 100%;
    padding: 0.6rem 0.8rem;
    font-size: 0.95rem;
    border: 1px solid var(--border-light);
    border-radius: var(--radius-sm);
    background-color: #fff;
    color: var(--text-primary);
    transition: all 0.2s;
    font-family: inherit;
  }

  .toolbar-input:focus, .toolbar-select:focus {
    outline: none;
    border-color: var(--corporate-blue);
    box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
  }
  
  .toolbar-btn {
    background-color: var(--text-primary);
    color: white;
    border: none;
    padding: 0.6rem 1.5rem;
    border-radius: var(--radius-sm);
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
    transition: background 0.2s;
    white-space: nowrap;
  }
  
  .toolbar-btn:hover { background-color: #000; }

  /* --- 4. Product Grid --- */
  .product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.5rem;
  }

  /* --- 5. Product Card --- */
  .product-card {
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    text-decoration: none;
    position: relative;
    cursor: pointer; /* æ”¹ç‚º pointerï¼Œå› ç‚ºæœ‰äº›æ˜¯ div */
  }

  .product-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-hover);
    border-color: #cbd5e1;
  }

  /* Color Sample Area */
  .color-display {
    height: 140px;
    width: 100%;
    display: flex;
    position: relative;
    border-bottom: 1px solid var(--border-light);
  }

  .mass-tone, .tint-tone, .color-full {
    flex: 1;
    height: 100%;
    position: relative;
  }

  /* èª¿æ•´å¾Œçš„é¡è‰²æ¨™ç±¤ï¼šæœ¬è‰² / æ²–æ·¡ */
  .color-tag {
    position: absolute;
    bottom: 8px;
    left: 8px;
    background: rgba(255, 255, 255, 0.9);
    padding: 2px 8px;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-primary);
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.15);
    letter-spacing: 1px;
  }
  
  .tint-tone .color-tag { left: auto; right: 8px; }

  .card-body {
    padding: 1.25rem;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 0.5rem;
    border-bottom: 1px solid #f1f5f9;
    padding-bottom: 0.75rem;
  }

  .product-code {
    font-family: 'Roboto Mono', monospace;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--corporate-blue-dim);
    letter-spacing: -0.5px;
  }
  
  .ci-badge {
      font-size: 0.75rem;
      color: var(--text-tertiary);
      font-weight: 500;
      font-family: 'Roboto Mono', monospace;
  }

  .product-name {
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 1rem;
  }

  /* æ–‡å­—æè¿° - ç”¨æ–¼éé¡æ–™ç”¢å“ */
  .product-desc {
    font-size: 0.85rem;
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: 1rem;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .app-tags {
    margin-top: auto;
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }
  
  .tag {
    font-size: 0.75rem;
    color: var(--text-secondary);
    background: #f1f5f9;
    padding: 3px 8px;
    border-radius: var(--radius-sm);
    font-weight: 500;
    border: 1px solid transparent;
  }
  
  /* ç‰¹å®šæ¨™ç±¤é«˜äº® */
  .tag.highlight {
      background-color: #e0f2fe;
      color: #0369a1;
      border-color: #bae6fd;
  }
  
  .product-card:hover .tag {
      border-color: #cbd5e1;
      background: white;
  }
  .product-card:hover .tag.highlight {
      background-color: #e0f2fe;
  }

  /* æ•¸æ“šåŒ–è¦æ ¼æ¬„ä½ (Specs Grid) */
  .specs-container {
      margin-bottom: 1rem;
      display: flex;
      flex-direction: column;
      gap: 6px;
  }

  .specs-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.8rem;
      color: var(--text-secondary);
  }
  
  .spec-label {
      font-weight: 600;
      color: var(--text-tertiary);
      font-size: 0.85rem;
      width: 60px;
  }

  .visual-bar {
      display: flex;
      gap: 3px;
      flex: 1;
      margin: 0 10px;
  }
  
  .dot {
      width: 100%; 
      height: 6px; 
      background: #e2e8f0;
      border-radius: 2px;
  }
  
  .dot.active { background: var(--corporate-blue); }
  .dot.active.heat { background: #f59e0b; } /* è€æº«ç”¨æ©™è‰² */
  .dot.active.cost { background: #64748b; } /* æˆæœ¬ç”¨ç°è‰² */

  .spec-value {
      font-weight: 700; 
      font-family:'Roboto Mono';
      width: 20px;
      text-align: right;
  }

  /* --- Modal Styles --- */
  .modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(15, 23, 42, 0.7); /* Deep backdrop */
    backdrop-filter: blur(4px);
    z-index: 2000;
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .modal-overlay.open {
    display: flex;
    opacity: 1;
  }

  .modal-card {
    background: white;
    width: 90%;
    max-width: 600px;
    max-height: 90vh;
    border-radius: 12px;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transform: scale(0.95);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .modal-overlay.open .modal-card {
    transform: scale(1);
  }

  .modal-header {
    background: linear-gradient(135deg, var(--header-bg-start), var(--header-bg-end));
    padding: 1.5rem;
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: start;
  }

  .modal-title h2 {
    margin: 0;
    font-size: 1.5rem;
  }
  .modal-subtitle {
    font-family: 'Roboto Mono', monospace;
    opacity: 0.8;
    font-size: 0.9rem;
    margin-top: 0.25rem;
    display: block;
  }

  .close-modal-btn {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    font-size: 1.2rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
  }
  .close-modal-btn:hover { background: rgba(255,255,255,0.4); }

  .modal-body {
    padding: 2rem;
    overflow-y: auto;
    color: var(--text-secondary);
    font-size: 1rem;
    line-height: 1.7;
  }

  .modal-section-title {
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    display: block;
    margin-top: 1.5rem;
    border-left: 4px solid var(--corporate-blue);
    padding-left: 10px;
  }
  .modal-section-title:first-child { margin-top: 0; }

  .modal-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 0.5rem;
  }

  .modal-footer {
    padding: 1rem 2rem;
    border-top: 1px solid var(--border-light);
    background: #f8fafc;
    text-align: right;
  }

  .contact-modal-btn {
    display: inline-block;
    background: var(--text-primary);
    color: white;
    padding: 0.6rem 1.5rem;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.9rem;
    transition: background 0.2s;
  }
  .contact-modal-btn:hover { background: var(--header-bg-end); }

  /* --- Footer --- */
  footer {
    background: white;
    border-top: 1px solid var(--border-light);
    padding: 2rem;
    text-align: center;
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-top: 4rem;
  }
  
  footer .company-name {
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
      display: block;
  }

  /* --- Floating Contact --- */
  .float-btn {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--text-primary);
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      transition: all 0.3s;
      z-index: 999;
      font-size: 1.2rem;
  }
  
  .float-btn:hover {
      transform: scale(1.1);
      background: var(--header-bg-end);
  }

  @media (max-width: 768px) {
    header { padding: 2rem 1rem; }
    header h1 { font-size: 2rem; }
    nav ul { flex-wrap: wrap; padding: 0.5rem 0; }
    nav ul li a { padding: 0.5rem 1rem; font-size: 0.9rem; }
    .toolbar-container { flex-direction: column; align-items: stretch; }
    .toolbar-group { flex-direction: column; align-items: stretch; }
    .product-grid { grid-template-columns: 1fr; }
    .modal-card { width: 95%; max-height: 85vh; }
  }
  </style>
</head>
<body>

<header>
  <h1>ç”¢å“ç¸½è¡¨</h1>
</header>

<nav>
  <ul>
    <li><a href="https://hwashine.tw/" class="home-link">é¦–é </a></li>
    <li><a href="https://hwashine.tw/about">é—œæ–¼æˆ‘å€‘</a></li>
    <li><a href="#" onclick="switchCategory('all'); return false;" class="active" id="nav-all">ç”¢å“</a></li>
    <li><a href="https://hwashine.tw/contact">è¯çµ¡æˆ‘å€‘</a></li>
  </ul>
</nav>

<main>
  <div class="toolbar-container">
      <div class="toolbar-group" style="flex: 2;">
          <select id="category-select" class="toolbar-select" onchange="switchCategory(this.value)">
              <option value="all">æ‰€æœ‰ç”¢å“é¡åˆ¥ (All Products)</option>
              <option value="organic">æœ‰æ©Ÿé¡æ–™ (Organic Pigments)</option>
              <option value="solvent">æº¶åŠ‘æŸ“æ–™ (Solvent Dyes)</option>
              <option value="fluorescent">è¢å…‰å¢ç™½åŠ‘ (Optical Brighteners)</option>
              <option value="other">åŠ©åŠ‘/æ¨¹è„‚ (Additives & Resins)</option>
          </select>
      </div>

      <div class="toolbar-group" style="flex: 2;">
          <input type="text" id="search-input" class="toolbar-input" placeholder="æœå°‹ä»£è™Ÿæˆ–åç¨± (e.g. PO34)...">
      </div>

      <div class="toolbar-group" id="advanced-filters">
          <select id="color-filter" class="toolbar-select">
              <option value="">è‰²ç³» (Color)</option>
              <option value="è—è‰²">è—è‰² Blue</option>
              <option value="æ©™è‰²">æ©™è‰² Orange</option>
              <option value="ç´…è‰²">ç´…è‰² Red</option>
              <option value="ç´«è‰²">ç´«è‰² Violet</option>
              <option value="é»ƒè‰²">é»ƒè‰² Yellow</option>
          </select>
          
          <select id="app-filter" class="toolbar-select">
              <option value="">æ‡‰ç”¨ç‰¹æ€§ (App)</option>
              <option value="å°¼é¾">å°¼é¾ Nylon</option>
              <option value="é«˜è€å€™">é«˜è€å€™ Weather-Resistant</option>
              <option value="ç„¡é¹µç´ ">ç„¡é¹µç´  Halogen-Free</option>
              <!-- ç§»é™¤äº† é£Ÿå“æ¥è§¸ç­‰ç´š é¸é … -->
          </select>
      </div>
      
      <button id="search-button" class="toolbar-btn">æŸ¥è©¢</button>
  </div>

  <div id="product-grid" class="product-grid">
    <!-- Products populated via JS -->
  </div>
</main>

<footer>
    <p>&copy; 2024 è¯ç¿”èˆˆæ¥­æœ‰é™å…¬å¸. All Rights Reserved. | å°ˆæ¥­é¡æ–™é€²å‡ºå£</p>
</footer>

<a href="https://hwashine.tw/contact" class="float-btn" title="è¯çµ¡æˆ‘å€‘">âœ‰</a>

<!-- Modal Component -->
<div id="product-modal" class="modal-overlay" onclick="closeModal(event)">
  <div class="modal-card" onclick="event.stopPropagation()">
    <div class="modal-header">
      <div class="modal-title">
        <h2 id="modal-name">Product Name</h2>
        <span id="modal-code" class="modal-subtitle">CODE</span>
      </div>
      <button class="close-modal-btn" onclick="closeModal()">Ã—</button>
    </div>
    <div class="modal-body">
      <div id="modal-content">
        <!-- Content injected via JS -->
      </div>
    </div>
    <div class="modal-footer">
      <a href="https://hwashine.tw/contact" class="contact-modal-btn">è©¢å•æ­¤ç”¢å“</a>
    </div>
  </div>
</div>

<script>
// --- Data Source ---
const organicPigments = [
  // è—è‰²
  { code: "PB15:0", name: "é¡æ–™è— 15:0", cat: "è—è‰²", light: 7, heat: 3, cost: 1, mass: "#1941E6", tint: "#2A8CF5", apps: ["é«˜è€å€™", "ç„¡é¹µç´ "] },
  { code: "PB15:1", name: "é¡æ–™è— 15:1", cat: "è—è‰²", light: 8, heat: 4, cost: 1, mass: "#1941E6", tint: "#2A8CF5", apps: ["å°¼é¾", "é«˜è€å€™"] },
  { code: "PB15:3", name: "é¡æ–™è— 15:3", cat: "è—è‰²", light: 8, heat: 5, cost: 1, mass: "#1755DC", tint: "#16A0E6", apps: ["å°¼é¾", "é«˜è€å€™", "ç„¡é¹µç´ "] },
  { code: "PB15:4", name: "é¡æ–™è— 15:4", cat: "è—è‰²", light: 8, heat: 4, cost: 2, mass: "#1755DC", tint: "#16A0E6", apps: ["é«˜è€å€™", "ç„¡é¹µç´ "] },
  { code: "PB15:6", name: "é¡æ–™è— 15:6", cat: "è—è‰²", light: 8, heat: 5, cost: 5, mass: "#0235B2", tint: "#008EF0", apps: ["é«˜è€å€™", "ç„¡é¹µç´ "] },
  { code: "PB60", name: "é¡æ–™è— 60", cat: "è—è‰²", light: 8, heat: 5, cost: 5, mass: "#102A63", tint: "#4a6fa5", apps: ["é«˜è€å€™", "ç„¡é¹µç´ "] },
  // æ©™è‰²
  { code: "PO13", name: "é¡æ–™æ©™ 13", cat: "æ©™è‰²", light: 3, heat: 1, cost: 1, mass: "#F2101A", tint: "#FD583E", apps: [] },
  { code: "PO34", name: "é¡æ–™æ©™ 34", cat: "æ©™è‰²", light: 5, heat: 3, cost: 2, mass: "#EC2800", tint: "#FF976A", apps: [] },
  { code: "PO36", name: "é¡æ–™æ©™ 36", cat: "æ©™è‰²", light: 8, heat: 2, cost: 3, mass: "#D84012", tint: "#FF7D4D", apps: ["é«˜è€å€™"] },
  { code: "PO64", name: "é¡æ–™æ©™ 64", cat: "æ©™è‰²", light: 7, heat: 4, cost: 4, mass: "#E84A05", tint: "#FF9E5E", apps: ["ç„¡é¹µç´ "] },
  { code: "PO72", name: "é¡æ–™æ©™ 72", cat: "æ©™è‰²", light: 8, heat: 5, cost: 5, mass: "#EF6C00", tint: "#FFCC80", apps: ["é«˜è€å€™", "ç„¡é¹µç´ "] },
  // ç´…è‰²
  { code: "PR122", name: "é¡æ–™ç´… 122", cat: "ç´…è‰²", light: 8, heat: 5, cost: 4, mass: "#5B0011", tint: "#E88FD3", apps: ["å°¼é¾", "é«˜è€å€™", "ç„¡é¹µç´ "] },
  { code: "PR146", name: "é¡æ–™ç´… 146", cat: "ç´…è‰²", light: 6, heat: 3, cost: 2, mass: "#D3170E", tint: "#E89FC1", apps: [] },
  { code: "PR166", name: "é¡æ–™ç´… 166", cat: "ç´…è‰²", light: 8, heat: 5, cost: 3, mass: "#E34234", tint: "#FF7F7F", apps: [] },
  { code: "PR170", name: "é¡æ–™ç´… 170", cat: "ç´…è‰²", light: 5, heat: 3, cost: 2, mass: "#C21807", tint: "#FF5252", apps: ["ç„¡é¹µç´ "] },
  { code: "PR176", name: "é¡æ–™ç´… 176", cat: "ç´…è‰²", light: 7, heat: 4, cost: 4, mass: "#8C001A", tint: "#E53935", apps: ["ç„¡é¹µç´ ", "link: Pigmentred176.html"] },
  { code: "PR177", name: "é¡æ–™ç´… 177", cat: "ç´…è‰²", light: 7, heat: 4, cost: 5, mass: "#89010F", tint: "#DA3555", apps: ["é«˜è€å€™", "ç„¡é¹µç´ "] },
  { code: "PR185", name: "é¡æ–™ç´… 185", cat: "ç´…è‰²", light: 7, heat: 4, cost: 4, mass: "#B00D23", tint: "#FF4081", apps: ["ç„¡é¹µç´ "] },
  { code: "PR208", name: "é¡æ–™ç´… 208", cat: "ç´…è‰²", light: 7, heat: 4, cost: 5, mass: "#EC2523", tint: "#FF7291", apps: ["ç„¡é¹µç´ "] },
  { code: "PR242", name: "é¡æ–™ç´… 242", cat: "ç´…è‰²", light: 7, heat: 4, cost: 5, mass: "#D50000", tint: "#FF5131", apps: ["é«˜è€å€™"] },
  { code: "PR254", name: "é¡æ–™ç´… 254", cat: "ç´…è‰²", light: 8, heat: 5, cost: 2, mass: "#C40202", tint: "#FF4545", apps: ["é«˜è€å€™"] },
  // ç´«è‰²
  { code: "PV19", name: "é¡æ–™ç´« 19", cat: "ç´«è‰²", light: 8, heat: 5, cost: 5, mass: "#750045", tint: "#D56E96", apps: ["å°¼é¾", "é«˜è€å€™", "ç„¡é¹µç´ "] },
  { code: "PV23", name: "é¡æ–™ç´« 23", cat: "ç´«è‰²", light: 7, heat: 4, cost: 4, mass: "#150028", tint: "#683FB5", apps: ["å°¼é¾", "é«˜è€å€™"] },
  // é»ƒè‰²
  { code: "PY14", name: "é¡æ–™é»ƒ 14", cat: "é»ƒè‰²", light: 3, heat: 2, cost: 1, mass: "#FDD835", tint: "#FFF59D", apps: [] },
  { code: "PY74", name: "é¡æ–™é»ƒ 74", cat: "é»ƒè‰²", light: 7, heat: 1, cost: 1, mass: "#FEEA3B", tint: "#FFFF8D", apps: ["ç„¡é¹µç´ "] },
  { code: "PY83", name: "é¡æ–™é»ƒ 83", cat: "é»ƒè‰²", light: 7, heat: 3, cost: 2, mass: "#FFB300", tint: "#FFE082", apps: [] },
  { code: "PY110", name: "é¡æ–™é»ƒ 110", cat: "é»ƒè‰²", light: 8, heat: 5, cost: 5, mass: "#FB8C00", tint: "#FFCC80", apps: ["é«˜è€å€™"] },
  { code: "PY128", name: "é¡æ–™é»ƒ 128", cat: "é»ƒè‰²", light: 8, heat: 4, cost: 5, mass: "#FFEE58", tint: "#FFF9C4", apps: ["é«˜è€å€™"] },
  { code: "PY138", name: "é¡æ–™é»ƒ 138", cat: "é»ƒè‰²", light: 8, heat: 5, cost: 4, mass: "#F9DA2E", tint: "#FFF176", apps: ["é«˜è€å€™"] },
  { code: "PY139", name: "é¡æ–™é»ƒ 139", cat: "é»ƒè‰²", light: 8, heat: 4, cost: 3, mass: "#FFA000", tint: "#FFECB3", apps: ["é«˜è€å€™", "ç„¡é¹µç´ "] },
  { code: "PY150", name: "é¡æ–™é»ƒ 150", cat: "é»ƒè‰²", light: 8, heat: 5, cost: 3, mass: "#9E7E08", tint: "#FFD600", apps: ["å°¼é¾", "é«˜è€å€™"] },
  { code: "PY151", name: "é¡æ–™é»ƒ 151", cat: "é»ƒè‰²", light: 7, heat: 3, cost: 3, mass: "#FFEB3B", tint: "#FFFF8D", apps: ["ç„¡é¹µç´ "] },
  { code: "PY154", name: "é¡æ–™é»ƒ 154", cat: "é»ƒè‰²", light: 8, heat: 2, cost: 3, mass: "#FFC107", tint: "#FFE57F", apps: ["é«˜è€å€™"] },
  { code: "PY155", name: "é¡æ–™é»ƒ 155", cat: "é»ƒè‰²", light: 7, heat: 4, cost: 3, mass: "#FFCA28", tint: "#FFF59D", apps: ["ç„¡é¹µç´ "] },
  { code: "PY180", name: "é¡æ–™é»ƒ 180", cat: "é»ƒè‰²", light: 7, heat: 4, cost: 3, mass: "#FDD835", tint: "#FFF9C4", apps: ["ç„¡é¹µç´ "] },
  { code: "PY191", name: "é¡æ–™é»ƒ 191", cat: "é»ƒè‰²", light: 6, heat: 5, cost: 2, mass: "#FFB300", tint: "#FFE082", apps: [] },
  { code: "PY192", name: "é¡æ–™é»ƒ 192", cat: "é»ƒè‰²", light: 7, heat: 5, cost: 3, mass: "#FBC02D", tint: "#FFF176", apps: ["å°¼é¾", "ç„¡é¹µç´ "] }];

// Added 'details' for Modal Content and 'usage' for "å¸¸è¦‹ç”¨é€”" section
const otherProducts = [
  { 
     code: "TPO", 
     name: "å…‰å•Ÿå§‹åŠ‘ TPO", 
     cat: "å…¶ä»–", 
     color: "#f5f5f5", 
     type: 'other', 
     desc: "å¸æ”¶æ³¢é•·: 295, 380, 393nmã€‚å›ºåŒ–å¿«ï¼Œé©åˆåšè†œã€‚",
     details: "TPO æ˜¯ä¸€ç¨®é«˜æ•ˆçš„è‡ªç”±åŸº(I)å‹å…‰å¼•ç™¼åŠ‘ï¼Œä¸»è¦ç”¨æ–¼UVå›ºåŒ–é«”ç³»ã€‚å®ƒå…·æœ‰åœ¨é•·æ³¢é•·èŒƒåœï¼ˆ350-400nmï¼‰çš„æœ‰æ•ˆå¸æ”¶ï¼Œé€™ä½¿å¾—å®ƒéå¸¸é©åˆæ–¼å«éˆ¦ç™½ç²‰çš„ç™½è‰²å¡—æ–™å’Œåšè†œå¡—å±¤çš„å›ºåŒ–ã€‚ç‰¹é»åŒ…æ‹¬ï¼šå›ºåŒ–é€Ÿåº¦å¿«ã€å…‰æ¼‚ç™½æ•ˆæœå¥½ï¼ˆå›ºåŒ–å¾Œä¸é»ƒè®Šï¼‰ã€ä½æ°£å‘³ã€‚",
    apps: ["UVå¡—æ–™", "UVæ²¹å¢¨"],
    usage: ["UVæœ¨å™¨å¡—æ–™", "UVçµ²å°æ²¹å¢¨", "å¹³ç‰ˆå°åˆ·æ²¹å¢¨", "å…‰å›ºåŒ–è† ç²˜åŠ‘"]
  },
  { 
     code: "MXD6", 
     name: "ç‰¹æ®Šå°¼é¾ MXD6", 
     cat: "å…¶ä»–", 
     color: "#e0e0e0", 
     type: 'other', 
     link: "https://hwashine.tw/PA-MXD6/indexMXD6",
     desc: "é«˜æ°£é«”é˜»éš”æ€§ã€é«˜å¼·åº¦èˆ‡è€ç†±æ€§ã€‚", 
     apps: ["å°¼é¾", "é«˜è€å€™", "ç„¡é¹µç´ "] 
   },
  { 
     code: "Solvent", 
     name: "æº¶åŠ‘æŸ“æ–™ç³»åˆ—", 
     cat: "æº¶åŠ‘æŸ“æ–™", 
     color: "linear-gradient(135deg, #ef4444, #eab308, #3b82f6)", 
     type: 'solvent', 
     link: "https://hwashine.tw/solvent-dyes-showcase/",
     desc: "é«˜é€æ˜åº¦ã€é«˜è‰²å½©å¼·åº¦ã€‚", 
     apps: ["å°¼é¾"] 
   },
   /* --- ä¿®æ”¹è™•ï¼šåˆä½µè¢å…‰å¢ç™½åŠ‘ç‚ºå–®ä¸€ç”¢å“ç³»åˆ— --- */
  { 
     code: "Series", 
     name: "è¢å…‰å¢ç™½åŠ‘ç³»åˆ—ç”¢å“", 
     cat: "è¢å…‰å¢ç™½åŠ‘", 
     color: "linear-gradient(135deg, #e0f2f1, #80deea)", /* ä½¿ç”¨æ¸…æ–°çš„æ¼¸å±¤è—è‰² */
     type: 'fluorescent',
     link: "https://hwashine.tw/fluorescent/", /* æŒ‡å®šé€£çµ */
     desc: "åŒ…å« OB, OB-1, KCB, KSN, FP-127 ç­‰å¤šç¨®è¦æ ¼ã€‚é©ç”¨æ–¼å¡‘è† ã€åŒ–çº–ã€æ²¹å¢¨ç­‰é ˜åŸŸï¼Œå¢ç™½æ•ˆæœé¡¯è‘—ã€‚", 
     apps: ["OB", "OB-1", "KCB", "KSN"] /* æ¨™ç±¤é¡¯ç¤ºåŒ…å«çš„å‹è™Ÿ */
  }
];

let allProducts = [];
let currentCategory = 'all';

function initData() {
  const organicProcessed = organicPigments.map(p => ({
    ...p,
    type: 'organic',
    link: p.link || `https://hwashine.tw/${p.code.replace(':', '-')}`
  }));
  allProducts = [...organicProcessed, ...otherProducts];
}

function renderBar(value, max, className) {
    const dots = Array(max).fill(0).map((_, i) => 
         `<div class="dot ${i < value ? 'active ' + className : ''}"></div>`
    ).join('');
    return `<div class="visual-bar">${dots}</div>`;
}

function getProductCard(p) {
  let colorHtml = '';
  
  if (p.type === 'organic') {
    colorHtml = `
      <div class="color-display">
        <div class="mass-tone" style="background-color: ${p.mass}"> 
           <div class="color-tag">æœ¬è‰²</div>
        </div>
        <div class="tint-tone" style="background-color: ${p.tint}"> 
           <div class="color-tag">æ²–æ·¡</div>
        </div>
      </div>`;
  } else {
    const style = p.color.includes('gradient') ? `background:${p.color}` : `background-color:${p.color}`;
    colorHtml = `
      <div class="color-display">
        <div class="color-full" style="${style}"></div>
      </div>`;
  }

  const hiddenApps = ["æ²¹å¢¨", "å¡—æ–™", "å¡‘æ–™"];
  
  let appTags = '';
  // è¢å…‰å¢ç™½åŠ‘ç³»åˆ—ç¾åœ¨å¯ä»¥é¡¯ç¤ºæ¨™ç±¤äº†ï¼Œæ‰€ä»¥ç§»é™¤äº†èˆŠçš„åˆ¤æ–·é™åˆ¶
  if (true) { 
      appTags = p.apps ? p.apps
        .filter(a => !hiddenApps.includes(a)) 
         .map(a => {
            // Check if app is a special link (starts with "link:")
            if (a.startsWith("link:")) return '';
            return `<span class="tag highlight">${a}</span>`;
        })
        .join('') : '';
  }
  
  let detailsHtml = '';
  
  if (p.type === 'organic') {
      detailsHtml = `
      <div class="specs-container">
          <div class="specs-row">
            <span class="spec-label">ç¶œåˆæ€§èƒ½</span>
            ${renderBar(p.light, 8, 'light')}
            <span class="spec-value">${p.light}</span>
          </div>
          <div class="specs-row">
            <span class="spec-label">è€æº«</span>
            ${renderBar(p.heat, 5, 'heat')}
            <span class="spec-value">${p.heat}</span>
          </div>
          <div class="specs-row">
            <span class="spec-label">æˆæœ¬</span>
            ${renderBar(p.cost, 5, 'cost')}
            <span class="spec-value">${p.cost}</span>
          </div>
      </div>`;
  } else {
      detailsHtml = `<div class="product-desc">${p.desc}</div>`;
  }

  // Interaction Logic: Modal for TPO, Link for others
  let cardAttribs = `href="${p.link || '#'}" target="_blank"`;
  
  // Custom link handling from apps array (e.g., for PR176)
  if (p.apps) {
      const customLink = p.apps.find(a => a.startsWith("link:"));
      if (customLink) {
          cardAttribs = `href="${customLink.split(':')[1].trim()}" target="_blank"`;
      }
  }

  let tagType = 'a';
  
  // ä¿®æ”¹è™•ï¼šåªè®“ TPO ä½¿ç”¨ Modalï¼Œè¢å…‰å¢ç™½åŠ‘ç³»åˆ—ç¾åœ¨èµ°é è¨­çš„ href é‚è¼¯
  if (p.code === 'TPO') {
      tagType = 'div';
      cardAttribs = `onclick="openModal('${p.code}')"`;
  }

  return `
    <${tagType} ${cardAttribs} class="product-card">
      ${colorHtml}
      <div class="card-body">
        <div class="card-header">
           <span class="product-code">${p.code}</span>
           <span class="ci-badge">${p.type === 'organic' ? 'Organic' : (p.type === 'fluorescent' ? 'Brightener' : 'Additive')}</span>
        </div>
        <div class="product-name">${p.name.replace(p.code, '').trim()}</div>
        ${detailsHtml}
        <div class="app-tags">${appTags}</div>
      </div>
    </${tagType}>
  `;
}

function renderProducts(list) {
  const grid = document.getElementById('product-grid');
  if (list.length === 0) {
      grid.innerHTML = `<div style="text-align:center; grid-column:1/-1; padding:4rem; color:#94a3b8;">
        <div style="font-size:3rem; margin-bottom:1rem;">ğŸ”</div>
        <div>æ²’æœ‰æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„ç”¢å“</div>
      </div>`;
  } else {
      grid.innerHTML = list.map(getProductCard).join('');
  }
}

// --- Modal Functions ---
function openModal(code) {
    const product = allProducts.find(p => p.code === code);
    if (!product) return;

    document.getElementById('modal-name').textContent = product.name.replace(product.code, '').trim();
    document.getElementById('modal-code').textContent = product.code;
    
    let contentHtml = '';
    
    if (product.details) {
        contentHtml += `<span class="modal-section-title">ç”¢å“ä»‹ç´¹</span><p>${product.details}</p>`;
    } else if (product.desc) {
        contentHtml += `<span class="modal-section-title">ç”¢å“æè¿°</span><p>${product.desc}</p>`;
    }

    // Displays Common Uses (usage)
    if (product.usage && product.usage.length > 0) {
        contentHtml += `<span class="modal-section-title">å¸¸è¦‹ç”¨é€”</span><div class="modal-tags">`;
        product.usage.forEach(u => {
            contentHtml += `<span class="tag highlight">${u}</span>`;
        });
        contentHtml += `</div>`;
    }

    document.getElementById('modal-content').innerHTML = contentHtml;
    document.getElementById('product-modal').classList.add('open');
}

function closeModal(event) {
    // If event is present (clicked overlay), only close if specific target
    if (event && event.target.id !== 'product-modal' && !event.target.classList.contains('close-modal-btn')) {
        return;
    }
    document.getElementById('product-modal').classList.remove('open');
}

// --- Filter Logic ---
function switchCategory(cat) {
    currentCategory = cat;
    
    const select = document.getElementById('category-select');
    if(select.value !== cat) select.value = cat;

    const advFilters = document.getElementById('advanced-filters');
    if(cat === 'other' || cat === 'fluorescent') {
        advFilters.style.display = 'none';
    } else {
        advFilters.style.display = 'flex';
    }
    
    filterProducts();
}

function filterProducts() {
  const cat = document.getElementById('category-select').value;
  const term = document.getElementById('search-input').value.toLowerCase();
  const color = document.getElementById('color-filter').value;
  const app = document.getElementById('app-filter').value;

  const filtered = allProducts.filter(p => {
      if(cat !== 'all' && p.type !== cat) return false;
      if(term && !(p.code + p.name + p.desc).toLowerCase().includes(term)) return false;
      if(color && p.cat !== color) return false;
      if(app && p.apps && !p.apps.includes(app)) return false;
      return true;
  });
  renderProducts(filtered);
}

document.addEventListener('DOMContentLoaded', () => {
    initData();

    // --- æ–°å¢ï¼šç¶²å€åƒæ•¸åµæ¸¬é‚è¼¯ ---
    // å–å¾—ç¶²å€ä¸­çš„æŸ¥è©¢åƒæ•¸
    const urlParams = new URLSearchParams(window.location.search);
    const categoryParam = urlParams.get('category'); // ä¾‹å¦‚ ?category=fluorescent

    if (categoryParam) {
        // æª¢æŸ¥è©²é¡åˆ¥æ˜¯å¦å­˜åœ¨æ–¼ä¸‹æ‹‰é¸å–®ä¸­ï¼Œé¿å…ç„¡æ•ˆåƒæ•¸å ±éŒ¯
        const select = document.getElementById('category-select');
        const options = Array.from(select.options).map(opt => opt.value);
        
        if (options.includes(categoryParam)) {
            // å¦‚æœåƒæ•¸æœ‰æ•ˆï¼Œç›´æ¥åˆ‡æ›åˆ°è©²é¡åˆ¥
            switchCategory(categoryParam);
        } else {
            // ç„¡æ•ˆåƒæ•¸å‰‡é¡¯ç¤ºé è¨­
            filterProducts(); 
        }
    } else {
        // ç„¡åƒæ•¸æ™‚é¡¯ç¤ºé è¨­
        filterProducts(); 
    }
    // ----------------------------

    document.getElementById('search-button').addEventListener('click', filterProducts);
    document.getElementById('search-input').addEventListener('keyup', (e) => { if(e.key==='Enter') filterProducts(); });
    document.getElementById('color-filter').addEventListener('change', filterProducts);
    document.getElementById('app-filter').addEventListener('change', filterProducts);
});
</script>
<script src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" xintegrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"3e0e168fcc584b3aae69cd7f0b37248e","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script><script src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" xintegrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"3e0e168fcc584b3aae69cd7f0b37248e","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>
