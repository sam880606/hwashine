<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>華翔興業有限公司 | 溶劑染料產品目錄</title>
    <!-- Tailwind CSS for rapid styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        .color-swatch {
            transition: transform 0.3s ease;
        }
        .dye-card:hover .color-swatch {
            transform: scale(1.05);
        }
        /* Custom scrollbar for modal */
        .modal-content::-webkit-scrollbar {
            width: 8px;
        }
        .modal-content::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .modal-content::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        .modal-content::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <!-- Logo / Company Name -->
                <a href="https://hwashine.tw/" target="_blank" class="flex items-center gap-3 group hover:opacity-90 transition">
                    <img src="https://hwashine.tw/favicon.ico" alt="華翔興業 Logo" class="w-10 h-10 rounded-lg shadow-sm group-hover:shadow-md transition object-contain">
                    <div class="flex flex-col">
                        <h1 class="text-xl font-bold text-slate-800 leading-tight">華翔興業有限公司</h1>
                        <span class="text-xs font-normal text-slate-500">溶劑染料目錄 Solvent Dyes</span>
                    </div>
                </a>
                
                <!-- Search & Filter & Contact -->
                <div class="w-full md:w-auto flex flex-col sm:flex-row gap-3 items-center">
                    <div class="relative w-full sm:w-auto">
                        <input type="text" id="searchInput" placeholder="搜尋名稱, CAS, C.I. No..." 
                               class="w-full sm:w-56 pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition text-sm">
                        <svg class="w-4 h-4 text-slate-400 absolute left-3 top-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </div>
                    <select id="categoryFilter" class="w-full sm:w-auto px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white text-sm cursor-pointer">
                        <option value="all">所有色系</option>
                        <option value="Yellow">黃色系 (Yellow)</option>
                        <option value="Red">紅色系 (Red)</option>
                        <option value="Blue">藍色系 (Blue)</option>
                        <option value="Green">綠色系 (Green)</option>
                        <option value="Orange">橙色系 (Orange)</option>
                        <option value="Violet">紫色系 (Violet)</option>
                    </select>
                    <a href="https://hwashine.tw/contact" target="_blank" class="w-full sm:w-auto px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white text-sm font-medium rounded-lg transition text-center shadow-sm whitespace-nowrap">
                        聯絡我們
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Grid Container -->
        <div id="dyesContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Cards will be injected here via JS -->
        </div>

        <!-- No Results Message -->
        <div id="noResults" class="hidden text-center py-12">
            <svg class="w-16 h-16 text-slate-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
            <h3 class="text-lg font-medium text-slate-600">沒有找到相關產品</h3>
            <p class="text-slate-500">請嘗試其他關鍵字或清除篩選條件。</p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-800 text-slate-300 py-6 mt-auto">
        <div class="max-w-7xl mx-auto px-4 text-center text-sm">
            <p>&copy; 2025 <a href="https://hwashine.tw/" target="_blank" class="hover:text-white underline decoration-slate-500 hover:decoration-white transition">華翔興業有限公司</a> 版權所有</p>
        </div>
    </footer>

    <!-- Product Detail Modal (Hidden by default) -->
    <div id="productModal" class="fixed inset-0 z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <!-- Backdrop -->
        <div class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity backdrop-blur-sm" onclick="closeModal()"></div>

        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <!-- Modal Panel -->
                <div class="relative transform overflow-hidden rounded-xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-3xl">
                    
                    <!-- Modal Header with Color Band -->
                    <div id="modalColorHeader" class="h-24 w-full relative">
                        <!-- Updated Close Button for better visibility on all backgrounds -->
                        <button onclick="closeModal()" class="absolute top-4 right-4 bg-white hover:bg-slate-100 text-slate-800 rounded-full p-2 shadow-md transition focus:outline-none z-10">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>

                    <div class="px-6 py-6 modal-content max-h-[80vh] overflow-y-auto">
                        <div class="flex flex-col md:flex-row gap-6">
                            <!-- Left: Basic Info -->
                            <div class="md:w-1/3 border-b md:border-b-0 md:border-r border-slate-200 pb-6 md:pb-0 md:pr-6">
                                <h2 id="modalTitle" class="text-3xl font-bold text-slate-900 mb-1"></h2>
                                <p id="modalCode" class="text-xl text-slate-500 mb-4 font-mono"></p>
                                
                                <div class="space-y-3 text-sm">
                                    <div>
                                        <span class="block text-xs font-semibold text-slate-400 uppercase">English Name</span>
                                        <span id="modalEnName" class="text-slate-700 font-medium"></span>
                                    </div>
                                    <div>
                                        <span class="block text-xs font-semibold text-slate-400 uppercase">C.I. No.</span>
                                        <span id="modalCI" class="text-slate-700 font-medium"></span>
                                    </div>
                                    <div>
                                        <span class="block text-xs font-semibold text-slate-400 uppercase">CAS No.</span>
                                        <span id="modalCAS" class="text-slate-700 font-medium font-mono"></span>
                                    </div>
                                     <div id="modalChemicalClassWrapper">
                                        <span class="block text-xs font-semibold text-slate-400 uppercase">化學類別</span>
                                        <span id="modalChemicalClass" class="text-slate-700 font-medium"></span>
                                    </div>
                                </div>

                                <a id="modalInquiry" href="#" target="_blank" class="mt-8 flex items-center justify-center w-full px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition shadow-sm">
                                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                                    聯繫詢價
                                </a>
                            </div>

                            <!-- Right: Technical Details -->
                            <div class="md:w-2/3">
                                <!-- Technical Specs Grid -->
                                <h3 class="text-lg font-bold text-slate-800 mb-3 flex items-center">
                                    <svg class="w-5 h-5 mr-2 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                                    技術參數
                                </h3>
                                <div class="grid grid-cols-2 gap-4 mb-6 bg-slate-50 p-4 rounded-lg">
                                    <div>
                                        <span class="text-xs text-slate-500 block">耐熱性 (Heat Stability)</span>
                                        <span id="modalHeat" class="font-semibold text-slate-800"></span>
                                    </div>
                                    <div>
                                        <span class="text-xs text-slate-500 block">耐光性 (Light Fastness)</span>
                                        <span id="modalLight" class="font-semibold text-slate-800"></span>
                                    </div>
                                    <div id="modalMeltingWrapper">
                                        <span class="text-xs text-slate-500 block">熔點 (Melting Point)</span>
                                        <span id="modalMelting" class="font-semibold text-slate-800"></span>
                                    </div>
                                    <div id="modalMigrationWrapper">
                                        <span class="text-xs text-slate-500 block">耐遷移 (Migration)</span>
                                        <span id="modalMigration" class="font-semibold text-slate-800"></span>
                                    </div>
                                </div>

                                <!-- Compatibility -->
                                <h3 class="text-lg font-bold text-slate-800 mb-3 flex items-center">
                                    <svg class="w-5 h-5 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                    適用材質 (Compatibility)
                                </h3>
                                <div id="modalPolymers" class="flex flex-wrap gap-2 mb-6">
                                    <!-- Badges injected here -->
                                </div>

                                <!-- Application Section Removed -->

                                <!-- Complex Data Tables (Hidden unless data exists) -->
                                <div id="complexDataArea" class="space-y-4">
                                    <!-- Dynamic content for detailed tables like SY98 -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data provided by user
        const allDyes = [
            // Solvent Yellow (SY)
            {
                name: '溶劑黃 98', code: 'S.Y. 98', color: '#F4FF09',
                common_name_en: 'Solvent Yellow 98',
                colour_index_no: 'C.I. 56238', 
                cas_no: '12671-74-8',
                chemical_class: 'Monoazo',
                heat_stability: '300°C (PS)', // Simplified for card
                heat_stability_test: 'Tested at Transparent (0.05%) and Reduction (0.2%+1.0%TiO2) concentrations',
                heat_stability_data: [
                    { polymer: 'PS', temp: '300' },
                    { polymer: 'ABS', temp: '300' },
                    { polymer: 'PC', temp: '340' },
                    { polymer: 'PET', temp: '300' }
                ],
                light_fastness: '7 (PS)', // Simplified for card
                light_fastness_test: 'Tested at Transparent (0.05%) and Reduction (0.2%+1.0%TiO2) concentrations',
                light_fastness_data: {
                    PS: { 'Transparent (0.05%)': '7', 'Reduction (0.2%+1.0%TiO₂)': '4-5' },
                    ABS: { 'Transparent (0.05%)': '5-6', 'Reduction (0.2%+1.0%TiO₂)': '3' },
                    PC: { 'Transparent (0.05%)': '7-8', 'Reduction (0.2%+1.0%TiO₂)': '6' },
                    PET: { 'Transparent (0.05%)': '7', 'Reduction (0.2%+1.0%TiO₂)': '7' },
                    'PVC-R': { 'Transparent (0.05%)': '7', 'Reduction (0.2%+1.0%TiO₂)': '5-6' }
                },
                compatible_polymers: [
                    { polymer: 'PVC-R', status: 'recommended' },
                    { polymer: 'LDPE', status: 'not recommended' },
                    { polymer: 'HDPE', status: 'not recommended' },
                    { polymer: 'PP', status: 'not recommended' },
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PA6', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' }, 
                    { polymer: 'SAN', status: 'recommended' }, 
                    { polymer: 'Rubber', status: 'not recommended' },
                    { polymer: 'POM', status: 'not recommended' }
                ],
                applications: ['General plastics coloring', 'Masterbatches'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑黃 157', code: 'S.Y. 157', color: '#F2F469',
                common_name_en: 'Solvent Yellow 157', colour_index_no: 'C.I. Not Available', cas_no: '27908-75-4',
                heat_stability: '300°C', light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' } 
                ],
                applications: ['Polyester coloring', 'Spin dyeing'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑黃 33', code: 'S.Y. 33', color: '#E3E64D',
                common_name_en: 'Solvent Yellow 33',
                colour_index_no: 'C.I. 47000', 
                cas_no: '8003-22-3',
                ec_no: '232-318-2',
                chemical_class: 'Quinoline', 
                physical_properties: 'Yellow powder, greenish yellow light. Soluble in sulfuric acid, DMF and pyridine, hardly soluble in ethanol, insoluble in water.', 
                melting_point: '230°C', 
                bulk_density: '0.21g/ml', 
                heat_stability: '280°C', 
                light_fastness: '7', 
                migration_resistance: '4-5', 
                metal_content: 'Total <200ppm (Fe<100, As<4, Ba<4, Cr<3, Hg<0.05, Zn<10, Pb<1, Se<4, Sb<4, Cd<0.05 ppm)',
                compatible_polymers: [ 
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'Polyester Fiber', status: 'recommended' } 
                ],
                applications: ['Coloring of PS, ABS, PC, PMMA, PET, SAN and other resins', 'Dyeing of polyester superfine fibers', 'Used as solvent dye'], 
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑黃 93', code: 'S.Y. 93', color: '#F4EB1F',
                common_name_en: 'Solvent Yellow 93', colour_index_no: 'C.I. 48160', cas_no: '4702-90-3',
                heat_stability: '300°C', light_fastness: '7-8', 
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' }
                ],
                applications: ['Engineering plastics', 'High-performance applications'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑黃 147', code: 'S.Y. 147', color: '#E2DD4C',
                common_name_en: 'Solvent Yellow 147', colour_index_no: 'C.I. Not Available', cas_no: '4118-16-5',
                heat_stability: '300°C', light_fastness: '6-7',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' }
                ],
                applications: ['General plastics'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑黃 114', code: 'S.Y. 114', color: '#FEF93D',
                common_name_en: 'Solvent Yellow 114', colour_index_no: 'C.I. 47020', cas_no: '7576-65-0',
                heat_stability: '300°C', light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' }
                ],
                applications: ['General plastics', 'Transparent applications'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑黃 176', code: 'S.Y. 176', color: '#FFF93E',
                common_name_en: 'Solvent Yellow 176', colour_index_no: 'C.I. Not Available', cas_no: '10319-14-9',
                heat_stability: '300°C', light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' }
                ],
                applications: ['Fiber coloring', 'Engineering plastics'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑黃 163', code: 'S.Y. 163', color: '#F7D643',
                common_name_en: 'Solvent Yellow 163',
                colour_index_no: 'C.I. 58840',
                cas_no: '13676-91-0',
                ec_no: 'Not Available', 
                chemical_class: 'Anthrapyridone',
                heat_stability: '300°C (General)',
                heat_stability_test: 'Typical values in common polymers',
                heat_stability_data: [ 
                    { polymer: 'PS', temp: '300' },
                    { polymer: 'ABS', temp: '300' },
                    { polymer: 'PC', temp: '300' },
                    { polymer: 'PMMA', temp: '300' },
                    { polymer: 'PET', temp: '300' },
                    { polymer: 'PBT', temp: '300' }
                ],
                light_fastness: '7-8',
                light_fastness_test: 'Typical values in common polymers (PET Fiber Lightfastness: 8)',
                light_fastness_data: { 
                    PS: { 'Rating': '7-8' },
                    ABS: { 'Rating': '8' },
                    PC: { 'Rating': '8' },
                    PMMA: { 'Rating': '8' },
                    PET: { 'Rating': '8' }
                },
                migration_resistance: 'Good',
                compatible_polymers: [
                     { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' } 
                ],
                applications: ['High-performance plastics', 'Automotive parts', 'PET fiber coloring'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑黃 160:1', code: 'S.Y. 160:1', color: '#F4FF09',
                common_name_en: 'Solvent Yellow 160:1', colour_index_no: 'C.I. Not Available', cas_no: '35773-43-4',
                heat_stability: '300°C', light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' }  
                ],
                applications: ['Engineering plastics', 'Polyester coloring'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑綠 3', code: 'S.G. 3', color: '#003549',
                common_name_en: 'Solvent Green 3', colour_index_no: 'C.I. 61565', cas_no: '128-80-3',
                heat_stability: '300°C', light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' }
                ],
                applications: ['General plastics', 'Fuel marking'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑綠 5', code: 'S.G. 5', color: '#deeb00',
                common_name_en: 'Solvent Green 5', colour_index_no: 'C.I. 59075', cas_no: '2744-50-5',
                heat_stability: '300°C', light_fastness: '5-6',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' }
                ],
                applications: ['Fluorescent applications', 'Marking'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑綠 28', code: 'S.G. 28', color: '#008359',
                common_name_en: 'Solvent Green 28', colour_index_no: 'C.I. 625580', cas_no: '71839-01-5',
                heat_stability: '300°C', light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' }
                ],
                applications: ['Spin dyeing', 'High-performance applications'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑橙 60', code: 'S.O. 60', color: '#eb8300',
                common_name_en: 'Solvent Orange 60', colour_index_no: 'C.I. 564100', cas_no: '6925-69-5',
                applications: ['Engineering plastics', 'High temp applications', 'Transparent and opaque dyeing of PS, SAN, PMMA, PC, PA6 and PA6.6'],
                inquiry_link: 'https://hwashine.tw/contact',
                related_info_link: 'https://hwashine.tw/SO60', 
                heat_stability: '300°C (PS)',
                heat_stability_test: 'in °C at 1/3 standard depth with 1% TiO₂ (ABS 4% TiO₂, and PS 2% TiO₂) evaluated accoding to DIN EN 12877',
                heat_stability_data: [
                    { polymer: 'PS', temp: '300' },
                    { polymer: 'SAN', temp: '280' },
                    { polymer: 'ABS', temp: '280' },
                    { polymer: 'PMMA', temp: '300' },
                    { polymer: 'PC', temp: '350' },
                    { polymer: 'PA6', temp: '300' },
                    { polymer: 'PET', temp: '290' },
                    { polymer: 'PBT', temp: '280' } 
                ],
                light_fastness: '7-8',
                light_fastness_test: '1/3 standard depth with 1% TiO₂ (PS with 2% TiO₂) accoding to DIN EN ISO 4892-2',
                light_fastness_data: { 
                    PC: { '染料 (%)': '0.155', 'Opaque 1.0% TiO₂': '7', 'Transp.': '7-8' },
                    PS: { '染料 (%)': '0.280', 'Opaque 2.0% TiO₂': '6', 'Transp.': '7-8' },
                    PMMA: { '染料 (%)': '0.155', 'Opaque 1.0% TiO₂': '6', 'Transp.': '7-8' }
                },
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PA6', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PBT', status: 'recommended' } 
                ]
            },
            {
                name: '溶劑橙 107', code: 'S.O. 107', color: '#dc3e00',
                common_name_en: 'Solvent Orange 107', colour_index_no: 'C.I. Not Available', cas_no: '185766-20-5',
                heat_stability: '300°C', light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                ],
                applications: ['Spin dyeing', 'Specialty polymers'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑橙 63', code: 'S.O. 63', color: '#ff6300',
                common_name_en: 'Solvent Orange 63', colour_index_no: 'C.I. 68550', cas_no: '12694-75-0',
                heat_stability: '280°C', light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PA6', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PBT', status: 'recommended' }
                ],
                applications: ['General plastics', 'Bright shades'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紅 197', code: 'S.R. 197', color: '#E52B50',
                common_name_en: 'Solvent Red 197', colour_index_no: 'C.I. 50370:1', cas_no: '52372-39-1',
                heat_stability: '300°C', light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' }
                ],
                applications: ['General plastics', 'Coatings'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紅 149', code: 'S.R. 149', color: '#f6004e',
                common_name_en: 'Solvent Red 149', colour_index_no: 'C.I. 674700', cas_no: '71902-18-6',
                heat_stability: '290°C', light_fastness: '6-7',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PA6', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PBT', status: 'recommended' }
                ],
                applications: ['Fluorescent red applications'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紅 196', code: 'S.R. 196', color: '#fe121a',
                common_name_en: 'Solvent Red 196', colour_index_no: 'C.I. 503745', cas_no: '52372-36-8',
                heat_stability: '300°C', light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    ],
                applications: ['General plastics'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紅 111', code: 'S.R. 111', color: '#de3415',
                common_name_en: 'Solvent Red 111', colour_index_no: 'C.I. 60505', cas_no: '82-38-2',
                heat_stability: '280°C', light_fastness: '6-7',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' }
                ],
                applications: ['General plastics', 'Engineering plastics'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紅 135', code: 'S.R. 135', color: '#d32106',
                common_name_en: 'Solvent Red 135', colour_index_no: 'C.I. 564120', cas_no: '71902-17-5',
                heat_stability: '300°C', light_fastness: '8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PA6', status: 'recommended' } 
                ],
                applications: ['Engineering plastics', 'Automotive'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紅 179', code: 'S.R. 179', color: '#c81a0c',
                common_name_en: 'Solvent Red 179', colour_index_no: 'C.I. 564150', cas_no: '89106-94-5',
                heat_stability: '300°C', light_fastness: '8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PA6', status: 'recommended' } 
                ],
                applications: ['High temperature plastics', 'Spin dyeing'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紅 169', code: 'S.R. 169', color: '#da2b21',
                common_name_en: 'Solvent Red 169', colour_index_no: 'C.I. Not Available', cas_no: '27354-18-3',
                heat_stability: '280°C', light_fastness: '6',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' }
                    ],
                applications: ['General plastics'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
                       {
                name: '溶劑紅 168', code: 'S.R. 168', color: '#c50f24',
                common_name_en: 'Solvent Red 168', colour_index_no: 'C.I. Not Available', cas_no: '71832-19-4',
                heat_stability: '280°C', light_fastness: '6-7',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' }
                ],
                applications: ['General plastics'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紅 146', code: 'S.R. 146', color: '#e3012e',
                common_name_en: 'Solvent Red 146', colour_index_no: 'C.I. 12716', cas_no: '70956-30-8',
                heat_stability: '300°C', light_fastness: '5',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PA6', status: 'recommended' }
                ],
                applications: ['General plastics', 'Transparent shades'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紅 195', code: 'S.R. 195', color: '#af001c',
                common_name_en: 'Solvent Red 195', colour_index_no: 'C.I. 165020', cas_no: '164251-88-1',
                heat_stability: '280°C', light_fastness: '8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' }
                ],
                applications: ['Spin dyeing'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紅 207', code: 'S.R. 207', color: '#c70056',
                common_name_en: 'Solvent Red 207', colour_index_no: 'C.I. 617001', cas_no: '10114-49-5',
                heat_stability: '260°C', light_fastness: '6-7',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' }
                ],
                applications: ['General plastics', 'Bluer shade red'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紅 52', code: 'S.R. 52', color: '#b90187',
                common_name_en: 'Solvent Red 52', colour_index_no: 'C.I. 68210', cas_no: '81-39-0',
                heat_stability: '280°C', light_fastness: '7',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PA6', status: 'recommended' }
                ],
                applications: ['Engineering plastics', 'Fluorescent effects'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紫 59', code: 'S.V. 59', color: '#9d007f',
                common_name_en: 'Solvent Violet 59', colour_index_no: 'C.I. 60735', cas_no: '6408-72-6',
                heat_stability: '300°C', light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' }
                ],
                applications: ['Engineering plastics', 'Clear violet shades'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紫 11', code: 'S.V. 11', color: '#76006b',
                common_name_en: 'Solvent Violet 11', colour_index_no: 'C.I. 61100', cas_no: '128-95-0',
                heat_stability: '300°C', light_fastness: '5-6',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' }
                ],
                applications: ['General plastics'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紫 31', code: 'S.V. 31', color: '#57006d',
                common_name_en: 'Solvent Violet 31', colour_index_no: 'C.I. 61102', cas_no: '70956-27-3',
                heat_stability: '300°C', light_fastness: '6-7',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' }
                ],
                applications: ['Engineering plastics'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紫 37', code: 'S.V. 37', color: '#4b0782',
                common_name_en: 'Solvent Violet 37', colour_index_no: 'C.I. Not Available', cas_no: '61969-50-4',
                heat_stability: '300°C', light_fastness: '6-7',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' }
                ],
                applications: ['General plastics'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑紫 13', code: 'S.V. 13', color: '#150671',
                common_name_en: 'Solvent Violet 13', colour_index_no: 'C.I. 60725', cas_no: '81-48-1',
                heat_stability: '290°C',
                light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' }
                ],
                applications: ['General plastics', 'Fuel marking'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑藍 35', code: 'S.B. 35', color: '#00429d',
                common_name_en: 'Solvent Blue 35', colour_index_no: 'C.I. 61554', cas_no: '17354-14-2',
                heat_stability: '280°C', light_fastness: '6-7',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' }
                ],
                applications: ['General plastics', 'Fuel coloring'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑藍 45', code: 'S.B. 45', color: '#07428c',
                common_name_en: 'Solvent Blue 45', colour_index_no: 'C.I. Not Available', cas_no: '37229-23-5',
                heat_stability: '200°C', light_fastness: '6-7',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' }
                ],
                applications: ['General plastics'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑藍 36', code: 'S.B. 36', color: '#00409f',
                common_name_en: 'Solvent Blue 36', colour_index_no: 'C.I. 61551', cas_no: '14233-37-5',
                heat_stability: '280°C', light_fastness: '5',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' }
                ],
                applications: ['General plastics', 'Engineering plastics'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑藍 78', code: 'S.B. 78', color: '#002f80',
                common_name_en: 'Solvent Blue 78', colour_index_no: 'C.I. 615030', cas_no: '2475-44-7',
                heat_stability: '300°C', light_fastness: '5-6',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' }
                ],
                applications: ['Engineering plastics', 'General purpose plastics', 'Masterbatches', 'Spin dyeing PET (limited)'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑藍 97', code: 'S.B. 97', color: '#003884',
                common_name_en: 'Solvent Blue 97', colour_index_no: 'C.I. 615290', cas_no: '61969-44-6',
                heat_stability: '300°C', light_fastness: '7',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PA6', status: 'recommended' } 
                ],
                applications: ['High-performance plastics', 'Automotive', 'FDA compliant for PET (check specific regulations)'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑藍 104', code: 'S.B. 104', color: '#003584',
                common_name_en: 'Solvent Blue 104', colour_index_no: 'C.I. 61568', cas_no: '116-75-6',
                heat_stability: '300°C', light_fastness: '6',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' },
                    { polymer: 'PA6', status: 'recommended' }
                ],
                applications: ['Spin dyeing PET/PA', 'Engineering plastics'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑藍 59', code: 'S.B. 59', color: '#00277a',
                common_name_en: 'Solvent Blue 59', colour_index_no: 'C.I. 61552', cas_no: '6944-46-3',
                heat_stability: '280°C', light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' }
                ],
                applications: ['General plastics', 'Inks'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑藍 102', code: 'S.B. 102', color: '#003075',
                common_name_en: 'Solvent Blue 102', colour_index_no: 'C.I. Not Available', cas_no: '15403-56-2',
                heat_stability: '300°C', light_fastness: '5',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' }
                ],
                applications: ['Consult TDS'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑藍 122', code: 'S.B. 122', color: '#1e2462',
                common_name_en: 'Solvent Blue 122', colour_index_no: 'C.I. 607260', cas_no: '67905-17-3',
                heat_stability: '300°C', light_fastness: '6-7',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' }
                ],
                applications: ['Plastics', 'Inks'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑藍 63', code: 'S.B. 63', color: '#002e5d',
                common_name_en: 'Solvent Blue 63', colour_index_no: 'C.I. 61525', cas_no: '6408-50-0',
                heat_stability: '280°C', light_fastness: '5',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'SAN', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' }
                ],
                applications: ['General plastics'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
            {
                name: '溶劑藍 67', code: 'S.B. 67', color: '#02a7bb',
                common_name_en: 'Solvent Blue 67', colour_index_no: 'C.I. Not Available', cas_no: '12226-74-3',
                heat_stability: '300°C', light_fastness: '7-8',
                compatible_polymers: [
                    { polymer: 'PS', status: 'recommended' },
                    { polymer: 'ABS', status: 'recommended' },
                    { polymer: 'PC', status: 'recommended' },
                    { polymer: 'PMMA', status: 'recommended' },
                    { polymer: 'PET', status: 'recommended' }
                ],
                applications: ['Printing inks', 'PA coloring'],
                inquiry_link: 'https://hwashine.tw/contact'
            },
        ];

        // --- Logic ---

        const container = document.getElementById('dyesContainer');
        const searchInput = document.getElementById('searchInput');
        const categoryFilter = document.getElementById('categoryFilter');
        const noResults = document.getElementById('noResults');
        const modal = document.getElementById('productModal');

        // Initial Render
        renderDyes(allDyes);

        // Event Listeners
        searchInput.addEventListener('input', handleSearch);
        categoryFilter.addEventListener('change', handleSearch);

        function handleSearch() {
            const term = searchInput.value.toLowerCase();
            const category = categoryFilter.value;

            const filtered = allDyes.filter(dye => {
                // Text Match
                const textMatch = 
                    dye.name.toLowerCase().includes(term) || 
                    dye.code.toLowerCase().includes(term) ||
                    dye.cas_no.includes(term) ||
                    (dye.colour_index_no && dye.colour_index_no.toLowerCase().includes(term));
                
                // Category Match (Checking if english name contains the color)
                let categoryMatch = true;
                if (category !== 'all') {
                    categoryMatch = dye.common_name_en.includes(category);
                }

                return textMatch && categoryMatch;
            });

            renderDyes(filtered);
        }

        function renderDyes(dyes) {
            container.innerHTML = '';
            
            if (dyes.length === 0) {
                noResults.classList.remove('hidden');
                return;
            } else {
                noResults.classList.add('hidden');
            }

            dyes.forEach(dye => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition duration-300 dye-card flex flex-col h-full border border-slate-100';
                
                // Check if color is very light to add border to swatch
                const isLightColor = dye.color.toLowerCase() === '#ffffff' || dye.color.toLowerCase() === '#f4ff09';

                card.innerHTML = `
                    <div class="h-32 w-full relative overflow-hidden group cursor-pointer" onclick="openModal('${dye.code}')">
                        <div class="color-swatch absolute inset-0 w-full h-full" style="background-color: ${dye.color};"></div>
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition duration-300"></div>
                        <div class="absolute bottom-2 right-2 bg-white bg-opacity-90 px-2 py-1 rounded text-xs font-mono font-bold text-slate-700 shadow-sm">
                            ${dye.code}
                        </div>
                    </div>
                    <div class="p-5 flex flex-col flex-grow">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-lg font-bold text-slate-800 leading-tight">${dye.name}</h3>
                        </div>
                        <p class="text-xs text-slate-500 mb-1">CAS: ${dye.cas_no}</p>
                        <p class="text-xs text-slate-500 mb-4">${dye.colour_index_no}</p>
                        
                        <div class="mt-auto grid grid-cols-2 gap-2 text-sm mb-4">
                            <div class="bg-slate-50 p-2 rounded text-center">
                                <span class="block text-xs text-slate-400">耐熱</span>
                                <span class="font-semibold text-slate-700">${dye.heat_stability || 'N/A'}</span>
                            </div>
                            <div class="bg-slate-50 p-2 rounded text-center">
                                <span class="block text-xs text-slate-400">耐光</span>
                                <span class="font-semibold text-slate-700">${dye.light_fastness || 'N/A'}</span>
                            </div>
                        </div>

                        <button onclick="openModal('${dye.code}')" class="w-full py-2 px-4 bg-slate-800 hover:bg-slate-700 text-white text-sm font-medium rounded-lg transition duration-200">
                            查看詳情
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- Modal Logic ---

        function openModal(code) {
            const dye = allDyes.find(d => d.code === code);
            if (!dye) return;

            // Populate Header
            document.getElementById('modalColorHeader').style.backgroundColor = dye.color;
            document.getElementById('modalTitle').textContent = dye.name;
            document.getElementById('modalCode').textContent = dye.code;
            document.getElementById('modalEnName').textContent = dye.common_name_en;
            document.getElementById('modalCI').textContent = dye.colour_index_no;
            document.getElementById('modalCAS').textContent = dye.cas_no;
            
            const chemClassEl = document.getElementById('modalChemicalClass');
            if(dye.chemical_class) {
                chemClassEl.textContent = dye.chemical_class;
                document.getElementById('modalChemicalClassWrapper').classList.remove('hidden');
            } else {
                document.getElementById('modalChemicalClassWrapper').classList.add('hidden');
            }

            document.getElementById('modalInquiry').href = dye.inquiry_link;

            // Technical Specs
            document.getElementById('modalHeat').textContent = dye.heat_stability || 'See Data';
            document.getElementById('modalLight').textContent = dye.light_fastness || 'See Data';
            
            if(dye.melting_point) {
                document.getElementById('modalMelting').textContent = dye.melting_point;
                document.getElementById('modalMeltingWrapper').classList.remove('hidden');
            } else {
                document.getElementById('modalMeltingWrapper').classList.add('hidden');
            }
            
            if(dye.migration_resistance) {
                document.getElementById('modalMigration').textContent = dye.migration_resistance;
                document.getElementById('modalMigrationWrapper').classList.remove('hidden');
            } else {
                document.getElementById('modalMigrationWrapper').classList.add('hidden');
            }

            // Polymers Badges (Updated: Only show recommended)
            const polymerContainer = document.getElementById('modalPolymers');
            polymerContainer.innerHTML = '';
            if (dye.compatible_polymers) {
                dye.compatible_polymers.forEach(p => {
                    // Filter: Only show recommended items
                    if (p.status !== 'recommended') return;

                    const badge = document.createElement('span');
                    badge.className = 'px-3 py-1 rounded-full text-xs font-semibold border bg-green-50 text-green-700 border-green-200';
                    badge.innerHTML = `✓ ${p.polymer}`;
                    polymerContainer.appendChild(badge);
                });
            }

            // Applications Logic Removed

            // Complex Data (Tables)
            const complexArea = document.getElementById('complexDataArea');
            complexArea.innerHTML = '';

            // Heat Stability Table
            if (dye.heat_stability_data && Array.isArray(dye.heat_stability_data)) {
                const heatTitle = document.createElement('h4');
                heatTitle.className = 'font-bold text-sm text-slate-700 mt-4 mb-2';
                heatTitle.textContent = `詳細耐熱數據 (${dye.heat_stability_test || '°C'})`;
                
                const table = document.createElement('table');
                table.className = 'min-w-full text-sm border border-slate-200 rounded overflow-hidden';
                let tableHTML = `<thead class="bg-slate-100 text-slate-600"><tr><th class="px-4 py-2 text-left">Polymer</th><th class="px-4 py-2 text-left">Temperature (°C)</th></tr></thead><tbody>`;
                
                dye.heat_stability_data.forEach(item => {
                    tableHTML += `<tr class="border-t border-slate-100">
                        <td class="px-4 py-2 font-medium text-slate-800">${item.polymer}</td>
                        <td class="px-4 py-2 text-slate-600">${item.temp}</td>
                    </tr>`;
                });
                tableHTML += '</tbody>';
                table.innerHTML = tableHTML;
                
                complexArea.appendChild(heatTitle);
                complexArea.appendChild(table);
            }

            // Light Fastness Table (Handling Nested Objects like in SY98)
            if (dye.light_fastness_data && typeof dye.light_fastness_data === 'object') {
                 const lightTitle = document.createElement('h4');
                lightTitle.className = 'font-bold text-sm text-slate-700 mt-4 mb-2';
                lightTitle.textContent = `詳細耐光數據 (${dye.light_fastness_test || 'Rating'})`;
                complexArea.appendChild(lightTitle);

                const tableContainer = document.createElement('div');
                tableContainer.className = 'overflow-x-auto border border-slate-200 rounded';

                // Check structure type. If it's the complex nested one (SY98) or simple
                const keys = Object.keys(dye.light_fastness_data);
                const firstVal = dye.light_fastness_data[keys[0]];

                if (typeof firstVal === 'object') {
                    // Complex table (Polymer -> Condition -> Value)
                    // Get all unique conditions
                    const conditions = new Set();
                    keys.forEach(poly => {
                        Object.keys(dye.light_fastness_data[poly]).forEach(c => conditions.add(c));
                    });
                    const conditionArr = Array.from(conditions);

                    let tableHTML = `<table class="min-w-full text-sm text-left"><thead class="bg-slate-100 text-slate-600"><tr><th class="px-4 py-2">Polymer</th>`;
                    conditionArr.forEach(c => tableHTML += `<th class="px-4 py-2">${c}</th>`);
                    tableHTML += `</tr></thead><tbody>`;

                    keys.forEach(poly => {
                        tableHTML += `<tr class="border-t border-slate-100"><td class="px-4 py-2 font-bold">${poly}</td>`;
                        conditionArr.forEach(c => {
                            tableHTML += `<td class="px-4 py-2">${dye.light_fastness_data[poly][c] || '-'}</td>`;
                        });
                        tableHTML += `</tr>`;
                    });
                    tableHTML += `</tbody></table>`;
                    tableContainer.innerHTML = tableHTML;

                } else {
                    // Simple Key-Value
                    let tableHTML = `<table class="min-w-full text-sm text-left"><thead class="bg-slate-100 text-slate-600"><tr><th class="px-4 py-2">Polymer</th><th class="px-4 py-2">Rating</th></tr></thead><tbody>`;
                    keys.forEach(poly => {
                        tableHTML += `<tr class="border-t border-slate-100"><td class="px-4 py-2 font-bold">${poly}</td><td class="px-4 py-2">${dye.light_fastness_data[poly]}</td></tr>`;
                    });
                    tableHTML += `</tbody></table>`;
                    tableContainer.innerHTML = tableHTML;
                }
                complexArea.appendChild(tableContainer);
            }

            // Show Modal
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent scrolling bg
        }

        function closeModal() {
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto'; // Restore scrolling
        }

        // Close modal on Esc key
        document.addEventListener('keydown', function(event) {
            if (event.key === "Escape") {
                closeModal();
            }
        });
    </script>
</body>
</html>
